<CourseFloatingBanner chapter={2}
  classNames="absolute z-10 right-0 top-0"
  notebooks={[
    {label: "Google Colab", value: "https://colab.research.google.com/github/huggingface/agents-course/blob/main/notebooks/unit2/smolagents/tool_calling_agents.ipynb"},
]} />

# å°†æ“ä½œç¼–å†™ä¸ºä»£ç ç‰‡æ®µæˆ– JSON ç»“æ„

<Tip>
æ‚¨å¯ä»¥é€šè¿‡ <a href="https://huggingface.co/agents-course/notebooks/blob/main/unit2/smolagents/tool_calling_agents.ipynb" target="_blank">æ­¤ Notebook</a> è·Ÿéšä»£ç å®è·µï¼Œè¯¥æ–‡ä»¶æ”¯æŒåœ¨ Google Colab ä¸­è¿è¡Œã€‚
</Tip>

å·¥å…·è°ƒç”¨æ™ºèƒ½ä½“ï¼ˆTool Calling Agentsï¼‰æ˜¯ `smolagents` ä¸­æä¾›çš„ç¬¬äºŒç§æ™ºèƒ½ä½“ç±»å‹ã€‚ä¸ä½¿ç”¨ Python ä»£ç ç‰‡æ®µçš„ä»£ç æ™ºèƒ½ä½“ï¼ˆCode Agentsï¼‰ä¸åŒï¼Œè¿™ç±»æ™ºèƒ½ä½“**åˆ©ç”¨ LLM æä¾›å•†çš„å†…ç½®å·¥å…·è°ƒç”¨èƒ½åŠ›**æ¥ç”Ÿæˆ **JSON ç»“æ„**çš„å·¥å…·è°ƒç”¨æŒ‡ä»¤ã€‚è¿™æ˜¯ OpenAIã€Anthropic ç­‰ä¸»æµæä¾›å•†é‡‡ç”¨çš„æ ‡å‡†æ–¹æ³•ã€‚

å½“ Alfred æƒ³è¦æœç´¢é¤é¥®æœåŠ¡å’Œæ´¾å¯¹åˆ›æ„æ—¶ï¼Œ`CodeAgent` ä¼šç”Ÿæˆå¹¶è¿è¡Œå¦‚ä¸‹ Python ä»£ç ï¼š

```python
for query in [
    "Best catering services in Gotham City", 
    "Party theme ideas for superheroes"
]:
    print(web_search(f"Search for: {query}"))
```

è€Œ `ToolCallingAgent` åˆ™ä¼šåˆ›å»º JSON ç»“æ„ï¼š

```python
[
    {"name": "web_search", "arguments": "Best catering services in Gotham City"},
    {"name": "web_search", "arguments": "Party theme ideas for superheroes"}
]
```

è¯¥ JSON ç»“æ„éšåä¼šè¢«ç”¨äºæ‰§è¡Œå·¥å…·è°ƒç”¨ã€‚

å°½ç®¡ `smolagents` ä¸»è¦ä¸“æ³¨äº `CodeAgents`ï¼ˆå› ä¸º[å®ƒä»¬æ•´ä½“è¡¨ç°æ›´å¥½](https://arxiv.org/abs/2402.01030)ï¼‰ï¼Œä½†å¯¹äºä¸éœ€è¦å˜é‡å¤„ç†æˆ–å¤æ‚å·¥å…·è°ƒç”¨çš„ç®€å•ç³»ç»Ÿï¼Œ`ToolCallingAgents` ä»ç„¶å¯ä»¥é«˜æ•ˆå·¥ä½œã€‚

![ä»£ç æ“ä½œä¸ JSON æ“ä½œå¯¹æ¯”](https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/transformers/code_vs_json_actions.png)

## å·¥å…·è°ƒç”¨æ™ºèƒ½ä½“çš„å·¥ä½œåŸç†

å·¥å…·è°ƒç”¨æ™ºèƒ½ä½“éµå¾ªä¸ä»£ç æ™ºèƒ½ä½“ç›¸åŒçš„å¤šæ­¥éª¤å·¥ä½œæµç¨‹ï¼ˆè¯¦è§[å‰ä¸€ç« èŠ‚](./code_agents)ï¼‰ã€‚å…³é”®åŒºåˆ«åœ¨äº**æ“ä½œç»“æ„æ–¹å¼**ï¼šæ™ºèƒ½ä½“ä¸å†ç”Ÿæˆå¯æ‰§è¡Œä»£ç ï¼Œè€Œæ˜¯**ç”ŸæˆæŒ‡å®šå·¥å…·åç§°å’Œå‚æ•°çš„ JSON å¯¹è±¡**ï¼Œç³»ç»Ÿéšå**è§£æè¿™äº›æŒ‡ä»¤**æ¥æ‰§è¡Œç›¸åº”å·¥å…·ã€‚

## ç¤ºä¾‹ï¼šè¿è¡Œå·¥å…·è°ƒç”¨æ™ºèƒ½ä½“

è®©æˆ‘ä»¬é‡æ–°å®¡è§† Alfred å¼€å§‹ç­¹å¤‡æ´¾å¯¹çš„ç¤ºä¾‹ï¼Œè¿™æ¬¡ä½¿ç”¨ `ToolCallingAgent` æ¥å±•ç¤ºåŒºåˆ«ã€‚æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªèƒ½å¤Ÿä½¿ç”¨ DuckDuckGo è¿›è¡Œç½‘é¡µæœç´¢çš„æ™ºèƒ½ä½“ï¼Œä¸ä»£ç æ™ºèƒ½ä½“ç¤ºä¾‹çš„å”¯ä¸€åŒºåˆ«åœ¨äºæ™ºèƒ½ä½“ç±»å‹â€”â€”æ¡†æ¶ä¼šå¤„ç†å…¶ä»–æ‰€æœ‰ç»†èŠ‚ï¼š

```python
from smolagents import ToolCallingAgent, DuckDuckGoSearchTool, HfApiModel

agent = ToolCallingAgent(tools=[DuckDuckGoSearchTool()], model=HfApiModel())

agent.run("Search for the best music recommendations for a party at the Wayne's mansion.")
```

å½“æŸ¥çœ‹æ™ºèƒ½ä½“çš„æ‰§è¡Œè·Ÿè¸ªæ—¶ï¼Œæ‚¨å°†çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹å†…å®¹è€Œé `Executing parsed code:`ï¼š

```text
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Calling tool: 'web_search' with arguments: {'query': "best music recommendations for a party at Wayne's         â”‚
â”‚ mansion"}                                                                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```  

æ™ºèƒ½ä½“ç”Ÿæˆç»“æ„åŒ–çš„å·¥å…·è°ƒç”¨æŒ‡ä»¤ï¼Œç³»ç»Ÿé€šè¿‡å¤„ç†è¿™äº›æŒ‡ä»¤æ¥ç”Ÿæˆè¾“å‡ºï¼Œè€Œéåƒ `CodeAgent` é‚£æ ·ç›´æ¥æ‰§è¡Œä»£ç ã€‚

ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£ä¸¤ç§æ™ºèƒ½ä½“ç±»å‹ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„ä¸€ç§ã€‚è®©æˆ‘ä»¬ç»§ç»­æ¢ç´¢ `smolagents`ï¼Œè®© Alfred çš„æ´¾å¯¹å¤§è·æˆåŠŸï¼ğŸ‰

## èµ„æº
- [ToolCallingAgent æ–‡æ¡£](https://huggingface.co/docs/smolagents/v1.8.1/en/reference/agents#smolagents.ToolCallingAgent) - ToolCallingAgent çš„å®˜æ–¹æ–‡æ¡£
