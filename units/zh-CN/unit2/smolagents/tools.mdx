<CourseFloatingBanner chapter={2}
  classNames="absolute z-10 right-0 top-0"
  notebooks={[
    {label: "Google Colab", value: "https://colab.research.google.com/github/huggingface/agents-course/blob/main/notebooks/unit2/smolagents/tools.ipynb"},
]} />

# å·¥å…·

æ­£å¦‚æˆ‘ä»¬åœ¨[ç¬¬ä¸€å•å…ƒ](https://huggingface.co/learn/agents-course/unit1/tools)æ‰€æ¢è®¨çš„ï¼Œæ™ºèƒ½ä½“é€šè¿‡å·¥å…·æ‰§è¡Œå„ç±»æ“ä½œã€‚åœ¨`smolagents`æ¡†æ¶ä¸­ï¼Œå·¥å…·è¢«è§†ä¸º **LLM å¯ä»¥åœ¨æ™ºèƒ½ä½“ç³»ç»Ÿä¸­è°ƒç”¨çš„å‡½æ•°**ã€‚

è¦ä½¿LLMèƒ½å¤Ÿè°ƒç”¨å·¥å…·ï¼Œéœ€è¦ä¸ºå…¶æä¾›åŒ…å«ä»¥ä¸‹å…³é”®è¦ç´ çš„**æ¥å£æè¿°**ï¼š

- **åç§°**ï¼šå·¥å…·çš„æ ‡è¯†åç§°
- **å·¥å…·æè¿°**ï¼šå·¥å…·çš„åŠŸèƒ½è¯´æ˜  
- **è¾“å…¥ç±»å‹åŠæè¿°**ï¼šå·¥å…·æ¥å—çš„å‚æ•°è¯´æ˜
- **è¾“å‡ºç±»å‹**ï¼šå·¥å…·çš„è¿”å›ç»“æœç±»å‹

ä»¥éŸ¦æ©åº„å›­ç­¹å¤‡æ´¾å¯¹ä¸ºä¾‹ï¼ŒAlfred éœ€è¦å¤šç§å·¥å…·æ¥æ”¶é›†ä¿¡æ¯â€”â€”ä»æœç´¢é¤é¥®æœåŠ¡åˆ°å¯»æ‰¾æ´¾å¯¹ä¸»é¢˜åˆ›æ„ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•æœç´¢å·¥å…·çš„æ¥å£ç¤ºä¾‹ï¼š

- **åç§°:** `web_search`
- **å·¥å…·æè¿°:** æ ¹æ®ç‰¹å®šæŸ¥è¯¢è¿›è¡Œç½‘ç»œæœç´¢
- **è¾“å…¥:** `query` (å­—ç¬¦ä¸²) - éœ€è¦æŸ¥æ‰¾çš„æœç´¢å…³é”®è¯
- **è¾“å‡º:** åŒ…å«æœç´¢ç»“æœçš„å­—ç¬¦ä¸²

é€šè¿‡ä½¿ç”¨è¿™äº›å·¥å…·ï¼ŒAlfred èƒ½å¤Ÿåšå‡ºæ˜æ™ºå†³ç­–å¹¶æ”¶é›†æ´¾å¯¹ç­¹å¤‡æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚

ä¸‹æ–¹åŠ¨ç”»å±•ç¤ºäº†å·¥å…·è°ƒç”¨çš„ç®¡ç†æµç¨‹ï¼š

![æ¥è‡ª https://huggingface.co/docs/smolagents/conceptual_guides/react çš„æ™ºèƒ½ä½“æµç¨‹](https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/transformers/Agent_ManimCE.gif)

## å·¥å…·åˆ›å»ºæ–¹æ³•

åœ¨`smolagents`ä¸­ï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å®šä¹‰å·¥å…·ï¼š  
1. **ä½¿ç”¨`@tool`è£…é¥°å™¨**åˆ›å»ºåŸºäºå‡½æ•°çš„ç®€å•å·¥å…·
2. **åˆ›å»º`Tool`çš„å­ç±»**å®ç°å¤æ‚åŠŸèƒ½    

### `@tool`è£…é¥°å™¨

`@tool`è£…é¥°å™¨æ˜¯**å®šä¹‰ç®€å•å·¥å…·çš„æ¨èæ–¹å¼**ã€‚åœ¨åº•å±‚ï¼Œsmolagents ä¼šä» Python å‡½æ•°è§£æåŸºæœ¬ä¿¡æ¯ã€‚å› æ­¤ï¼Œæ¸…æ™°çš„å‡½æ•°å‘½åå’Œè§„èŒƒçš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆdocstringï¼‰èƒ½è®© LLM æ›´æ˜“ç†è§£å·¥å…·ç”¨é€”ã€‚

ä½¿ç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰åŒ…å«ä»¥ä¸‹è¦ç´ çš„å‡½æ•°ï¼š  

- **æ˜ç¡®æè¿°æ€§çš„å‡½æ•°åç§°**ï¼šå¸®åŠ©LLMç†è§£å…¶ç”¨é€”  
- **è¾“å…¥è¾“å‡ºçš„ç±»å‹æç¤º**ï¼šç¡®ä¿æ­£ç¡®ä½¿ç”¨  
- **è¯¦ç»†æè¿°**ï¼šåŒ…å«æ˜ç¡®æè¿°å„å‚æ•°çš„`Args:`éƒ¨åˆ†ï¼Œè¿™äº›æè¿°ä¸º LLM æä¾›å…³é”®ä¸Šä¸‹æ–‡ä¿¡æ¯

#### åˆ›å»ºé¤é¥®è¯„åˆ†æŸ¥è¯¢å·¥å…·

<img src="https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/unit2/smolagents/alfred-catering.jpg" alt="Alfred Catering"/>

<Tip>
æ‚¨å¯ä»¥é€šè¿‡ <a href="https://huggingface.co/agents-course/notebooks/blob/main/unit2/smolagents/tools.ipynb" target="_blank">æ­¤ Notebook</a> è·Ÿéšä»£ç å®è·µï¼Œè¯¥æ–‡ä»¶æ”¯æŒåœ¨ Google Colab ä¸­è¿è¡Œã€‚
</Tip>

å‡è®¾ Alfred å·²ç¡®å®šæ´¾å¯¹èœå•ï¼Œä½†éœ€è¦ä¸ºå¤§é‡å®¾å®¢å‡†å¤‡é£Ÿç‰©ã€‚ä¸ºæ­¤ï¼Œä»–å¸Œæœ›é›‡ä½£é¤é¥®æœåŠ¡å¹¶éœ€è¦æ‰¾åˆ°å½“åœ°è¯„åˆ†æœ€é«˜çš„é€‰æ‹©ã€‚

ä»¥ä¸‹æ˜¯é€šè¿‡`@tool`è£…é¥°å™¨å®ç°è¯¥åŠŸèƒ½çš„ç¤ºä¾‹ï¼š

```python
from smolagents import CodeAgent, HfApiModel, tool

# å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè·å–æœ€é«˜è¯„åˆ†é¤é¥®æœåŠ¡çš„å‡½æ•°
@tool
def catering_service_tool(query: str) -> str:
    """
    This tool returns the highest-rated catering service in Gotham City.
    
    Args:
        query: A search term for finding catering services.
    """
   # ç¤ºä¾‹é¤é¥®æœåŠ¡åŠè¯„åˆ†åˆ—è¡¨
    services = {
        "Gotham Catering Co.": 4.9,
        "Wayne Manor Catering": 4.8,
        "Gotham City Events": 4.7,
    }
    
    # æŸ¥æ‰¾è¯„åˆ†æœ€é«˜çš„é¤é¥®æœåŠ¡ï¼ˆæ¨¡æ‹Ÿæœç´¢æŸ¥è¯¢è¿‡æ»¤ï¼‰
    best_service = max(services, key=services.get)
    
    return best_service


agent = CodeAgent(tools=[catering_service_tool], model=HfApiModel())

# è¿è¡Œæ™ºèƒ½ä½“å¯»æ‰¾æœ€ä½³é¤é¥®æœåŠ¡
result = agent.run(
    "Can you give me the name of the highest-rated catering service in Gotham City?"
)

print(result)   # Output: Gotham Catering Co.
```

### é€šè¿‡Pythonç±»å®šä¹‰å·¥å…·

æ­¤æ–¹æ³•éœ€è¦åˆ›å»º[`Tool`](https://huggingface.co/docs/smolagents/v1.8.1/en/reference/tools#smolagents.Tool)çš„å­ç±»ã€‚å¯¹äºå¤æ‚å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»å°è£…å‡½æ•°åŠå…¶å…ƒæ•°æ®æ¥å¸®åŠ© LLM ç†è§£ä½¿ç”¨æ–¹å¼ã€‚åœ¨ç±»ä¸­éœ€è¦å®šä¹‰ï¼š

- `name`: å·¥å…·åç§°  
- `description`: ç”¨äºæ„å»ºæ™ºèƒ½ä½“ç³»ç»Ÿæç¤ºçš„æè¿°  
- `inputs`: åŒ…å«`type`å’Œ`description`çš„å­—å…¸ï¼Œå¸®åŠ©Pythonè§£é‡Šå™¨å¤„ç†è¾“å…¥  
- `output_type`: æŒ‡å®šæœŸæœ›çš„è¾“å‡ºç±»å‹  
- `forward`: åŒ…å«æ‰§è¡Œé€»è¾‘çš„æ–¹æ³•  

ä»¥ä¸‹æ˜¯é€šè¿‡`Tool`ç±»æ„å»ºå·¥å…·å¹¶ä¸`CodeAgent`é›†æˆçš„ç¤ºä¾‹ï¼š

#### åˆ›å»ºè¶…çº§è‹±é›„ä¸»é¢˜æ´¾å¯¹åˆ›æ„ç”Ÿæˆå·¥å…·

Alfred è®¡åˆ’åœ¨åº„å›­ä¸¾åŠ**è¶…çº§è‹±é›„ä¸»é¢˜æ´¾å¯¹**ï¼Œä½†éœ€è¦ç‹¬ç‰¹åˆ›æ„è®©æ´»åŠ¨ä¸ä¼—ä¸åŒã€‚ä½œä¸ºå®Œç¾ç®¡å®¶ï¼Œä»–å¸Œæœ›ç”¨æ–°é¢–ä¸»é¢˜ç»™å®¾å®¢å¸¦æ¥æƒŠå–œã€‚

ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ ¹æ®ç±»åˆ«ç”Ÿæˆæ´¾å¯¹åˆ›æ„çš„å·¥å…·ï¼Œå¸®åŠ© Alfred æ‰¾åˆ°æœ€æƒŠè‰³çš„ä¸»é¢˜æ–¹æ¡ˆï¼š

```python
from smolagents import Tool, CodeAgent, HfApiModel

class SuperheroPartyThemeTool(Tool):
    name = "superhero_party_theme_generator"
    description = """
    This tool suggests creative superhero-themed party ideas based on a category.
    It returns a unique party theme idea."""
    
    inputs = {
        "category": {
            "type": "string",
            "description": "The type of superhero party (e.g., 'classic heroes', 'villain masquerade', 'futuristic Gotham').",
        }
    }
    
    output_type = "string"

    def forward(self, category: str):
        themes = {
            "classic heroes": "Justice League Gala: Guests come dressed as their favorite DC heroes with themed cocktails like 'The Kryptonite Punch'.",
            "villain masquerade": "Gotham Rogues' Ball: A mysterious masquerade where guests dress as classic Batman villains.",
            "futuristic Gotham": "Neo-Gotham Night: A cyberpunk-style party inspired by Batman Beyond, with neon decorations and futuristic gadgets."
        }
        
        return themes.get(category.lower(), "Themed party idea not found. Try 'classic heroes', 'villain masquerade', or 'futuristic Gotham'.")

# å®ä¾‹åŒ–å·¥å…·
party_theme_tool = SuperheroPartyThemeTool()
agent = CodeAgent(tools=[party_theme_tool], model=HfApiModel())

# è¿è¡Œæ™ºèƒ½ä½“ç”Ÿæˆæ´¾å¯¹ä¸»é¢˜
result = agent.run(
    "What would be a good superhero party idea for a 'villain masquerade' theme?"
)

print(result)  # Output: "Gotham Rogues' Ball: A mysterious masquerade where guests dress as classic Batman villains."
```

å€ŸåŠ©æ­¤å·¥å…·ï¼ŒAlfred å°†æˆä¸ºç»ˆæè¶…çº§ç®¡å®¶ï¼Œä¸ºå®¾å®¢å‘ˆç°éš¾å¿˜çš„è¶…çº§è‹±é›„ä¸»é¢˜æ´¾å¯¹ï¼ğŸ¦¸â™‚ï¸ğŸ¦¸â™€ï¸

## é»˜è®¤å·¥å…·ç®±  

`smolagents` è‡ªå¸¦ä¸€ç»„é¢„æ„å»ºå·¥å…·ï¼Œå¯ç›´æ¥æ³¨å…¥åˆ°æ‚¨çš„æ™ºèƒ½ä½“ä¸­ã€‚[é»˜è®¤å·¥å…·ç®±](https://huggingface.co/docs/smolagents/guided_tour?build-a-tool=Decorate+a+function+with+%40tool#default-toolbox) åŒ…å«:  

- **PythonInterpreterTool**  
- **FinalAnswerTool**  
- **UserInputTool**  
- **DuckDuckGoSearchTool**  
- **GoogleSearchTool**  
- **VisitWebpageTool**  

Alfred å¯ä»¥ä½¿ç”¨å¤šç§å·¥å…·æ¥ç¡®ä¿éŸ¦æ©åº„å›­çš„å®Œç¾æ´¾å¯¹:

- é¦–å…ˆï¼Œä»–å¯ä»¥ä½¿ç”¨ `DuckDuckGoSearchTool` æœç´¢åˆ›æ„è¶…çº§è‹±é›„ä¸»é¢˜æ´¾å¯¹çµæ„Ÿ  

- å¯¹äºé¤é¥®ï¼Œä»–ä¾èµ– `GoogleSearchTool` æŸ¥æ‰¾å“¥è°­å¸‚è¯„åˆ†æœ€é«˜çš„æœåŠ¡  

- è¦ç®¡ç†åº§ä½å®‰æ’ï¼ŒAlfred å¯ä»¥é€šè¿‡ `PythonInterpreterTool` è¿è¡Œè®¡ç®—  

- æ”¶é›†å®Œæ‰€æœ‰ä¿¡æ¯åï¼Œä»–ä½¿ç”¨ `FinalAnswerTool` æ•´åˆè®¡åˆ’  

é€šè¿‡è¿™äº›å·¥å…·ï¼ŒAlfred ç¡®ä¿æ´¾å¯¹æ—¢å‡ºä¼—åˆé¡ºåˆ©ã€‚ğŸ¦‡ğŸ’¡  

## å…±äº«ä¸å¯¼å…¥å·¥å…·  

**smolagents** æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯èƒ½å¤Ÿå°†è‡ªå®šä¹‰å·¥å…·å…±äº«åˆ° Hub å¹¶æ— ç¼é›†æˆç¤¾åŒºåˆ›å»ºçš„å·¥å…·ã€‚è¿™åŒ…æ‹¬ä¸ **HF Spaces** å’Œ **LangChain å·¥å…·**çš„è¿æ¥ï¼Œæ˜¾è‘—å¢å¼ºäº† Alfred ç­–åˆ’éš¾å¿˜éŸ¦æ©åº„å›­æ´¾å¯¹çš„èƒ½åŠ›ã€‚ğŸ­  

é€šè¿‡è¿™äº›é›†æˆï¼ŒAlfred å¯ä»¥åˆ©ç”¨é«˜çº§æ´»åŠ¨ç­–åˆ’å·¥å…·â€”â€”æ— è®ºæ˜¯è°ƒæ•´ç¯å…‰è¥é€ å®Œç¾æ°›å›´ã€ä¸ºæ´¾å¯¹ç­–åˆ’ç†æƒ³æ­Œå•ï¼Œè¿˜æ˜¯ä¸å“¥è°­å¸‚æœ€ä¼˜ç§€çš„é¤é¥®æœåŠ¡å•†åè°ƒã€‚  

ä»¥ä¸‹æ˜¯å±•ç¤ºè¿™äº›åŠŸèƒ½å¦‚ä½•æå‡æ´¾å¯¹ä½“éªŒçš„ç¤ºä¾‹:  

### å‘ Hub å…±äº«å·¥å…·  

ä¸ç¤¾åŒºåˆ†äº«è‡ªå®šä¹‰å·¥å…·éå¸¸ç®€å•ï¼åªéœ€ä½¿ç”¨ `push_to_hub()` æ–¹æ³•å°†å…¶ä¸Šä¼ åˆ°æ‚¨çš„ Hugging Face è´¦æˆ·ã€‚  

ä¾‹å¦‚ï¼ŒAlfred å¯ä»¥åˆ†äº«ä»–çš„ `party_theme_tool` ä»¥å¸®åŠ©å…¶ä»–äººæ‰¾åˆ°å“¥è°­å¸‚æœ€å¥½çš„é¤é¥®æœåŠ¡ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹:  

```python
party_theme_tool.push_to_hub("{your_username}/party_theme_tool", token="<YOUR_HUGGINGFACEHUB_API_TOKEN>")
```

### ä» Hub å¯¼å…¥å·¥å…·

æ‚¨å¯ä»¥ä½¿ç”¨ `load_tool()` å‡½æ•°è½»æ¾å¯¼å…¥å…¶ä»–ç”¨æˆ·åˆ›å»ºçš„å·¥å…·ã€‚ä¾‹å¦‚ï¼ŒAlfred å¯èƒ½å¸Œæœ›ä½¿ç”¨ AI ç”Ÿæˆæ´¾å¯¹çš„å®£ä¼ å›¾ç‰‡ã€‚æ— éœ€ä»å¤´æ„å»ºå·¥å…·ï¼Œä»–å¯ä»¥ç›´æ¥ä½¿ç”¨ç¤¾åŒºé¢„å®šä¹‰çš„æ–¹æ¡ˆ:

```python
from smolagents import load_tool, CodeAgent, HfApiModel

image_generation_tool = load_tool(
    "m-ric/text-to-image",
    trust_remote_code=True
)

agent = CodeAgent(
    tools=[image_generation_tool],
    model=HfApiModel()
)

agent.run("Generate an image of a luxurious superhero-themed party at Wayne Manor with made-up superheros.")
```

### å°† Hugging Face Space å¯¼å…¥ä¸ºå·¥å…·

æ‚¨å¯ä»¥ä½¿ç”¨ `Tool.from_space()` å°† HF Space ä½œä¸ºå·¥å…·å¯¼å…¥ã€‚è¿™å¼€å¯äº†ä¸ç¤¾åŒºæ•°åƒä¸ª Space é›†æˆçš„å¯èƒ½æ€§ï¼Œä»å›¾åƒç”Ÿæˆåˆ°æ•°æ®åˆ†æå‡å¯å®ç°ã€‚

å·¥å…·å°†é€šè¿‡ `gradio_client` è¿æ¥ Space çš„åç«¯ï¼Œè¯·ç¡®ä¿å·²é€šè¿‡ `pip` å®‰è£…è¯¥ä¾èµ–ï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰ã€‚

å¯¹äºæœ¬æ¬¡æ´¾å¯¹ï¼ŒAlfred å¯ä»¥ä½¿ç”¨ç°æœ‰çš„ HF Space ç”Ÿæˆå…¬å‘Šæ‰€éœ€çš„ AI å›¾åƒï¼ˆæ›¿ä»£ä¹‹å‰æåˆ°çš„é¢„å»ºå·¥å…·ï¼‰ã€‚è®©æˆ‘ä»¬å¼€å§‹æ„å»ºï¼š

```python
from smolagents import CodeAgent, HfApiModel, Tool

image_generation_tool = Tool.from_space(
    "black-forest-labs/FLUX.1-schnell",
    name="image_generator",
    description="Generate an image from a prompt"
)

model = HfApiModel("Qwen/Qwen2.5-Coder-32B-Instruct")

agent = CodeAgent(tools=[image_generation_tool], model=model)

agent.run(
    "Improve this prompt, then generate an image of it.", 
    additional_args={'user_prompt': 'A grand superhero-themed party at Wayne Manor, with Alfred overseeing a luxurious gala'}
)
```

### å¯¼å…¥ LangChain å·¥å…·


æˆ‘ä»¬å°†åœ¨åç»­ç« èŠ‚è®¨è®º `LangChain` æ¡†æ¶ã€‚ç›®å‰éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‚¨å¯ä»¥åœ¨ smolagents å·¥ä½œæµä¸­å¤ç”¨ LangChain å·¥å…·ï¼

æ‚¨å¯ä»¥ä½¿ç”¨ `Tool.from_langchain()` æ–¹æ³•è½»æ¾åŠ è½½ LangChain å·¥å…·ã€‚

è¿½æ±‚å®Œç¾çš„ Alfred æ­£åœ¨ç­¹å¤‡ä¸€åœºç››å¤§çš„è¶…çº§è‹±é›„ä¹‹å¤œæ´»åŠ¨ï¼ˆè¶éŸ¦æ©ä¸€å®¶å¤–å‡ºæ—¶ï¼‰ï¼Œä¸ºç¡®ä¿æ¯ä¸ªç»†èŠ‚éƒ½è¶…å‡ºé¢„æœŸï¼Œä»–å€ŸåŠ© LangChain å·¥å…·æ¥å¯»æ‰¾é¡¶çº§çš„å¨±ä¹åˆ›æ„ã€‚

å…·ä½“å®ç°å¦‚ä¸‹ï¼š

```python
from langchain.agents import load_tools
from smolagents import CodeAgent, HfApiModel, Tool

search_tool = Tool.from_langchain(load_tools(["serpapi"])[0])

agent = CodeAgent(tools=[search_tool], model=model)

agent.run("Search for luxury entertainment ideas for a superhero-themed event, such as live performances and interactive experiences.")
```

é€šè¿‡æ­¤è®¾ç½®ï¼ŒAlfred èƒ½å¿«é€Ÿå‘ç°é«˜ç«¯å¨±ä¹é€‰é¡¹ï¼Œç¡®ä¿å“¥è°­çš„ç²¾è‹±å®¾å®¢è·å¾—éš¾å¿˜ä½“éªŒã€‚è¯¥å·¥å…·å¸®åŠ©ä»–ç­–åˆ’éŸ¦æ©åº„å›­çš„å®Œç¾è¶…çº§è‹±é›„ä¸»é¢˜æ´»åŠ¨ï¼ğŸ‰

## èµ„æº

- [å·¥å…·æ•™ç¨‹](https://huggingface.co/docs/smolagents/tutorials/tools) - é€šè¿‡æœ¬æ•™ç¨‹å­¦ä¹ å¦‚ä½•é«˜æ•ˆä½¿ç”¨å·¥å…·
- [å·¥å…·æ–‡æ¡£](https://huggingface.co/docs/smolagents/v1.8.1/en/reference/tools) - å…¨é¢çš„å·¥å…·å‚è€ƒæ–‡æ¡£
- [å·¥å…·ä½¿ç”¨å¯¼è§ˆ](https://huggingface.co/docs/smolagents/v1.8.1/en/guided_tour#tools) - é€æ­¥æŒ‡å¯¼å¦‚ä½•æ„å»ºå’Œä½¿ç”¨å·¥å…·
- [æ„å»ºé«˜æ•ˆæ™ºèƒ½ä½“](https://huggingface.co/docs/smolagents/tutorials/building_good_agents) - å…³äºå¼€å‘å¯é é«˜æ€§èƒ½è‡ªå®šä¹‰å‡½æ•°æ™ºèƒ½ä½“çš„æœ€ä½³å®è·µæŒ‡å—